<ion-header>
    <ion-navbar text-wrap>
        <ion-buttons left>
            <button class="modal-close" ion-button (click)="closeModal()">
                <ion-icon class="close-icon" name="arrow-back"></ion-icon>
            </button>
        </ion-buttons>
        <ion-title text-wrap>Event Details</ion-title>
    </ion-navbar>
</ion-header>


<ion-content padding>

    <ion-list id="event-time-list" text-wrap>
        <ion-item text-center no-lines>
            <ion-card-header class="event-title" text-wrap><b>{{escapeEntity(e.EventTitle)}}</b>
                <p class="event-category" [ngStyle]="{'color': iconColorMap[e.ParentCatName]}">
                    {{e.ParentCatName}}
                    <span *ngIf="e.SecCatName"> | </span>
                    <span>{{e.SecCatName}}</span><br>
                    <ion-icon *ngIf="hasNotification && !isPastEvent()" name="notifications" (click)="onBellIconClick()"></ion-icon>
                    <ion-icon *ngIf="!hasNotification && !isPastEvent()" style="color: lightgray" name="notifications" (click)="onBellIconClick()"></ion-icon>
                </p>
            </ion-card-header>
        </ion-item>
        <hr>
        <ion-item no-lines no-padding class="event-time-info">
            <ion-label text-center icon-left>
                <ion-icon [ngStyle]="{'color': iconColorMap[e.ParentCatName]}" name="calendar"></ion-icon>
                <b>{{formatStartDate(e.EventStartDate)}}</b>
            </ion-label>
            <ion-label text-center icon-left>
                <ion-icon [ngStyle]="{'color': iconColorMap[e.ParentCatName]}" name="clock"></ion-icon>
                <b>{{formatStartTime(e.EventTime)}}</b>
            </ion-label>
        </ion-item>
    </ion-list>

    <ion-list id="event-detail-list" text-center text-wrap>

        <ion-item *ngIf="e.Description">
            <ion-label *ngIf="!isExpandedText && escapeEntity(e.Description).length > 400" style="margin-top: 0">
                {{escapeEntity(e.Description).substr(0, 400)}}...
                <ion-label [ngStyle]="{'color': iconColorMap[e.ParentCatName]}" class="expand-text"
                           (click)="expandDescription()">
                    <b *ngIf="platform.is('ios')">Read more</b>
                    <b *ngIf="platform.is('android')">READ MORE</b>
                </ion-label>
            </ion-label>
            <ion-label *ngIf="!isExpandedText && escapeEntity(e.Description).length < 400" style="margin-top: 0">
                {{escapeEntity(e.Description)}}
            </ion-label>
            <ion-label *ngIf="isExpandedText" style="margin-top: 0">
                {{escapeEntity(e.Description)}}
                <ion-label [ngStyle]="{'color': iconColorMap[e.ParentCatName]}" class="expand-text"
                           (click)="collapseDescription()">
                    <b *ngIf="platform.is('ios')">Hide</b>
                    <b *ngIf="platform.is('android')">HIDE</b>
                </ion-label>
            </ion-label>
        </ion-item>

        <ion-item *ngIf="e.Venue" icon-left>
            <ion-label>
                <ion-icon [ngStyle]="{'color': iconColorMap[e.ParentCatName]}" name="home"></ion-icon>
                {{escapeEntity(e.Venue)}}
            </ion-label>
        </ion-item>
        <ion-item *ngIf="e.VenueStreetAddress" icon-left>
            <ion-label>
                <ion-icon [ngStyle]="{'color': iconColorMap[e.ParentCatName]}" name="locate"></ion-icon>
                {{escapeEntity(e.VenueStreetAddress)}}
            </ion-label>
        </ion-item>
        <ion-item *ngIf="e.VenueCity || e.VenueState" icon-left>
            <ion-label>
                <ion-icon [ngStyle]="{'color': iconColorMap[e.ParentCatName]}" name="map"></ion-icon>
                {{escapeEntity(e.VenueCity)}}, {{escapeEntity(e.VenueState)}} {{escapeEntity(e.VenueZip)}}
            </ion-label>
        </ion-item>
        <ion-item *ngIf="e.VenuePhone" icon-left>
            <ion-label>
                <ion-icon [ngStyle]="{'color': iconColorMap[e.ParentCatName]}" name="grid"></ion-icon>
                {{e.VenuePhone}}
            </ion-label>
        </ion-item>
        <ion-item *ngIf="e.Websites" icon-left>
            <ion-label>
                <ion-icon [ngStyle]="{'color': iconColorMap[e.ParentCatName]}" name="link"></ion-icon>
                <!--TODO, add fix for having multiple websites-->
                <a [ngStyle]="{'color': iconColorMap[e.ParentCatName]}" href="{{e.Websites}}">{{e.Websites}}</a>
            </ion-label>
        </ion-item>
    </ion-list>


    <ion-buttons text-center>
        <button [ngStyle]="{'background-color': iconColorMap[e.ParentCatName]}" ion-button (click)="closeModal()"
                icon-end>
            Share
            <ion-icon name="logo-facebook"></ion-icon>
        </button>
        <button [ngStyle]="{'background-color': iconColorMap[e.ParentCatName]}" ion-button (click)="closeModal()"
                icon-end>
            Add
            <ion-icon name="calendar"></ion-icon>
        </button>
    </ion-buttons>
</ion-content>