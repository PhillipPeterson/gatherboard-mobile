<ion-header>
    <ion-toolbar>

        <!--event search bar-->
        <ion-row>
            <ion-col col-11>
                <ion-searchbar [(ngModel)]="searchTerms" (ionInput)="onSearchInput($event)"
                               (ionClear)="onSearchClear()"></ion-searchbar>
            </ion-col>
            <ion-col text-center no-padding col-1>
                <ion-icon class="calendar-icon" name="calendar"></ion-icon>
            </ion-col>
        </ion-row>
        <ion-row>

            <!--my feed view-->
            <ion-label (click)="getMyFeed()"
                       [ngClass]="{hiddenViewStyle: selectedView == 'All',
                                   visibleViewStyle: selectedView == 'My Feed'}"
                       ion-button clear class="header-label-left">My Feed
            </ion-label>
            <!--all event view-->
            <ion-label (click)="getAllFeed()"
                       [ngClass]="{hiddenViewStyle: selectedView == 'My Feed',
                                   visibleViewStyle: selectedView == 'All'}"
                       ion-button clear class="header-label-right">All
            </ion-label>

        </ion-row>
    </ion-toolbar>
</ion-header>

<ion-content>
    <div *ngIf="platform == 'Ios'" class="ios-padding"></div>
    <div *ngIf="platform == 'Android'" class="md-padding"></div>
    <div *ngIf="searchLoading" class="search-loading">
        <ion-spinner></ion-spinner>
    </div>

    <!--event list-->
    <ion-list *ngIf="hasEvents" text-wrap>
        <div *ngFor="let e of events; let i = index">
            <br *ngIf="i != 0 && e.PrevStartDate != e.EventStartDate">

            <!--date header-->
            <ion-card-header>
                <b *ngIf="isTodayEvent(e.EventStartDate) && i == 0">Today</b>
                <b *ngIf="!isTodayEvent(e.EventStartDate) && e.PrevStartDate != e.EventStartDate">{{formatStartDate(e.EventStartDate)}}</b>
            </ion-card-header>

            <!--event-->
            <event-card [e]="e"></event-card>

        </div>
    </ion-list>
    <ion-label *ngIf="!hasEvents && loading == null && !searchLoading" text-center>No events found</ion-label>
</ion-content>
